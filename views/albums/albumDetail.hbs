
<h1>Detalle del álbum</h1>

  

<div class="backcontainer row row-cols-4">

{{#each album.photos as |photo| }}

    <div class="card rounded" style="width: 18rem;">
      {{#if photo}}
     <a  
     class="borrar btn" data-id="{{photo._id}}"><img src="https://res.cloudinary.com/merjur/image/upload/v1663017361/birdApp/aspa_etothg.jpg" alt="aspa" style="max-width:2rem"></a>

        <img src="{{photo.url}}"
        class="card-img-top mt-4  "
        alt="{{photo._id}}"
        width="600"
      />
    </div>

     
  {{/if}}

{{/each}}
</div>

<a href="/albums/{{album._id}}/addPhoto"
     class="btn btn-primary bg-light-green border-0"
     >Añade una foto</a>

<script>
  const removeNodes = document.querySelectorAll(".remove");
  for (let node of removeNodes) {
    node.addEventListener('click', () => {
      const nodeId = node.dataset.id;
      axios.delete(`/photos/${nodeId}`)
        .then(responseFromApi => {
          console.log('Foto borrada******************', responseFromApi);
          if(responseFromApi.status == 204) {
            document.querySelector(`.photo[data-id="${nodeId}"]`).remove();
          }
        })
        .catch(error => console.log('Error!', error))
    })
  }
</script>